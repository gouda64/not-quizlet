<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="~{/fragments/general.html :: header-css}">
    <title>Sign Up</title>

</head>
<body>
    <header th:insert="~{/fragments/general.html :: header}"></header>

<!--    TODO: better client-side validation later-->
    <div>
    <form class="needs-validation" autocomplete="off" th:action="@{/signup}" method="post" th:object="${signupForm}" novalidate>
        <div class="">
            <label for="username">Username</label>
            <input type="text" th:field="*{username}" class="form-control" id="username" th:placeholder="#{placeholder.username}" required>
            <div class="invalid-feedback" style="display:block;" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></div>
        </div>

        <div class="">
            <label for="email">Email</label>
            <input type="email" th:field="*{email}" class="form-control" id="email" th:placeholder="#{placeholder.email}" required>
            <div class="invalid-feedback" style="display:block;" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        </div>

        <div class="">
            <label for="pwd">Password</label>
            <input type="password" th:field="*{password}" class="form-control is-invalid" id="pwd" th:placeholder="#{placeholder.password}" required>
            <div class="invalid-feedback" style="display:block;" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
        </div>

        <div class="">
            <label for="confirm-pwd">Confirm Password</label>
            <input type="password" th:field="*{passwordMatching}" class="form-control is-invalid" id="confirm-pwd" th:placeholder="#{placeholder.confirm_password}" required>
            <div class="invalid-feedback" style="display:block;" th:if="${#fields.hasErrors('passwordMatching')}" th:errors="*{passwordMatching}"></div>
        </div>

<!--        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"></div>-->
        <button type="submit" class="btn btn-primary">Create Account</button>
    </form>

    <hr class="my-4">
    <a th:href="@{/oauth2/authorization/google}">
        <button class="btn btn-primary mx-4">Google</button>
    </a>
    </div>

    <script>
        let form = document.querySelector(".needs-validation");

        form.addEventListener('submit', (event) => {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }

            form.classList.add('was-validated');
         });
    </script>
</body>
</html>